# 双仓库管理指南

本指南将帮助您设置和管理同时推送到阿里云和GitHub的双仓库配置。

## 🎯 目标

- 同时维护阿里云和GitHub两个代码仓库
- 一键推送到两个平台
- 保持两个仓库的同步

## 📋 前提条件

1. ✅ 项目已连接到阿里云代码仓库（当前状态）
2. ✅ 在GitHub上创建对应的仓库
3. ✅ 确保有两个平台的推送权限

## 🚀 快速开始

### 步骤1：设置双仓库配置

运行自动化设置脚本：

**Linux/Mac:**
```bash
./scripts/setup_dual_remote.sh
```

**Windows:**
```cmd
scripts\setup_dual_remote.bat
```

### 步骤2：输入GitHub仓库信息

脚本会提示您输入GitHub仓库URL，支持两种格式：
- HTTPS: `https://github.com/username/repository-name.git`
- SSH: `git@github.com:username/repository-name.git`

### 步骤3：选择是否立即推送

脚本会询问是否立即推送当前代码到两个仓库，您可以选择：
- `y` - 立即推送
- `n` - 稍后手动推送

## 📤 日常使用

### 一键推送到两个仓库

**Linux/Mac:**
```bash
./scripts/push_to_both.sh "您的提交信息"
```

**Windows:**
```cmd
scripts\push_to_both.bat "您的提交信息"
```

### 手动分别推送

```bash
# 推送到阿里云
git push origin master

# 推送到GitHub  
git push github master

# 同时推送（命令行方式）
git push origin master && git push github master
```

## 🔍 检查配置

查看当前远程仓库配置：
```bash
git remote -v
```

正确配置后应该显示：
```
github  https://github.com/username/repo.git (fetch)
github  https://github.com/username/repo.git (push)
origin  https://codeup.aliyun.com/xxx/RAG_self_practice.git (fetch)
origin  https://codeup.aliyun.com/xxx/RAG_self_practice.git (push)
```

## 🛠️ 故障排除

### 问题1：GitHub仓库添加失败
**解决方案：**
1. 确认GitHub仓库URL正确
2. 检查网络连接
3. 确认GitHub仓库已创建

### 问题2：推送权限被拒绝
**解决方案：**
1. 检查GitHub访问权限
2. 如使用SSH，确认SSH密钥已添加到GitHub
3. 如使用HTTPS，确认用户名密码正确

### 问题3：推送到某个仓库失败
**解决方案：**
1. 分别测试推送到各个仓库
2. 检查网络连接稳定性
3. 查看具体错误信息

## 📝 最佳实践

1. **定期同步**: 使用自动化脚本确保两个仓库保持同步
2. **提交信息**: 使用清晰的提交信息，便于在两个平台上追踪
3. **分支管理**: 如果使用多分支，确保两个仓库的分支策略一致
4. **备份策略**: 双仓库本身就是很好的备份策略

## 🔧 高级配置

### 设置不同的推送分支
```bash
# 推送到不同分支
git push origin master:main
git push github master:main
```

### 移除远程仓库
```bash
# 移除GitHub远程仓库
git remote remove github
```

### 修改远程仓库URL
```bash
# 修改GitHub远程仓库URL
git remote set-url github https://github.com/newusername/newrepo.git
```

## 📞 获取帮助

如果遇到问题，可以：
1. 查看脚本输出的详细错误信息
2. 检查网络连接和权限设置
3. 参考Git官方文档
4. 联系技术支持

---

**注意**: 本指南基于当前项目已连接阿里云仓库的情况。如果您的项目配置不同，请相应调整命令。
